{% extends "base_store_product.html" %}

{% block title %}{{ object.store.name }} | {{ object.name }}{% endblock title %}

{% block shop_info %}
    <div class="well shop_info">
        
        <h4><a href="{% url "imly_store_detail" object.store.slug %}">{{ object.store.name }}</a></h4>
        
        <div class="expandable">
            {{ object.store.description_html|safe }}
        </div>

        <div class="row-fluid">
            <div class="span10 offset1">
                <hr>
            </div>
        </div>
        
        <h5>We also sell:</h5>
        
        <div class="row-fluid">
            <ul class="thumbnails">
            {% for product in object.store.product_set.all %}
            {% if forloop.counter0|divisibleby:"3" %}<div class="row-fluid margined_product_detail_aside">{% endif %}
            <li class="span4">
                <div class="thumbnail">
                    <a href="{% url "imly_product_detail" object.store.slug product.slug %}"><img src="{{ product.image_thumbnail_mini.url }}" alt="{{ product.name }}" class="centered"></a>

                    <div class="clearfix"></div>
                </div>
            </li>
            {% if forloop.counter|divisibleby:"3" %}</div>{% endif %}
            {% if forloop.counter|divisibleby:"3" %}<div class="clearfix"></div>{% endif %}
            {% endfor %}
            </ul>
        </div>
        
        <h5>Total Items in Shop: <span class="h5_inline">{{ object.store.product_set.count }}</span></h5>
             
        <div class="row-fluid">
            <div class="span10 offset1">
                <hr>
            </div>
        </div>
        
        <h5>We deliver to:</h5>  
        <ul class="unstyled">
            {% for delivery in object.store.delivery_areas.all %}
                <li>{{ delivery|capfirst }}</li>
            {% endfor %}
        </ul>
    </div>            
{% endblock shop_info %}

{% block shop_product_content %}
    <div class="row-fluid">
        <div class="span8">
            <img class="img-rounded img-polaroid" src="{{ object.image_thumbnail_large.url }}" alt="{{ object.name }}">    
        </div>
        
        <div class="span4">
            <h2>{{ object.name }}</h2><small>by <a href="{% url "imly_store_detail" object.store.slug %}">{{ object.store.name }}</a></small>
            <br><br>
            <h4>{{ object.currency}} {{ object.get_price.unit_price|floatformat:"0" }}</h4>

            <form method="post" action="{% url "imly_add_order" object.slug %}">
            {% csrf_token %}
                {{ form.as_p }}

        <input type="submit" class="btn btn-success" value="Add to Cart">
            </form>
        </div>
    </div>
    <div class="row-fluid">
        <br>
        <div class="span6 offset3">
            <hr>
        </div>
    </div>
    
    <div class="row-fluid">
        <div class="span2">
            <p><strong>This item is : </strong></p>
        </div>
        <div class="span10">
            <ul class="inline tags_for_product">
                {% for tag in object.tags.all %}
                    <li>{{ tag }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <br>
    <div class="row-fluid">
        <div class="span2">
            <p><strong>Delivery Time :</strong></p>
        </div>
        <div class="span10">
            {% if object.lead_time == 1 %}
                <p>{{ object.lead_time }} day</p>
            {% else %}
                <p>{{ object.lead_time }} days</p>
            {% endif %}
        </div>
    </div>
    
    {% if object.description %}
    <br>
        <div class="row-fluid">
            <div class="span2">
                <p><strong>Description :</strong></p>
            </div>
            <div class="span10">
                {{ object.description_html|safe }}
            </div>
        </div>
    {% endif %}

    
    
    <div class="row-fluid">
        <br>
        <div class="span6 offset3">
            <hr>
        </div>
    </div>
    
    <h4>Ratings & Reviews:</h4>
    {% load ratings %}
    {% load comments %}
    
    {% render_comment_form for object %}
    <br>
    {% render_comment_list for object %}
                
{% endblock shop_product_content %}

